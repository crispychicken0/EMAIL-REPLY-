<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dispute Management System</title>
    <style>
        /* Previous styles remain the same */
        
        /* New styles for appeal templates */
        .appeal-templates {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .appeal-card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            border-left: 5px solid #667eea;
            transition: transform 0.3s ease;
        }
        
        .appeal-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .appeal-title {
            font-weight: 700;
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }
        
        .appeal-description {
            color: #495057;
            margin-bottom: 15px;
            line-height: 1.6;
        }
        
        .appeal-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            width: 100%;
            font-weight: 600;
            transition: transform 0.3s ease;
        }
        
        .appeal-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .appeal-form {
            background: white;
            border-radius: 10px;
            padding: 25px;
            margin-top: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .appeal-preview {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            font-family: monospace;
            white-space: pre-wrap;
        }
        
        .legal-reference {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }
        
        .legal-reference h4 {
            margin-top: 0;
            color: #0d47a1;
        }
        
        .legal-reference p {
            margin: 0;
            line-height: 1.6;
        }
        
        /* Previous styles remain the same */
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Dispute Management System</h1>
            <p>Manage compensation disputes and appeals for Noon & Careem orders</p>
        </div>
        
        <div class="tabs">
            <div class="tab active" onclick="switchTab('submit')">Submit Dispute</div>
            <div class="tab" onclick="switchTab('review')">Review Disputes</div>
            <div class="tab" onclick="switchTab('appeals')">Appeals</div>
        </div>
        
        <!-- Previous tabs remain the same -->
        
        <!-- New Appeals Tab -->
        <div id="appeals-tab" class="tab-content">
            <h2>Appeal Templates</h2>
            <p>Select an appropriate appeal template based on your situation. Each template includes legal references to UAE Consumer Protection Law.</p>
            
            <div class="appeal-templates">
                <div class="appeal-card">
                    <div class="appeal-title">1. General Appeal – No Evidence Provided</div>
                    <div class="appeal-description">
                        Use when compensation was cancelled without supporting evidence. References Federal Law No. 15 of 2020 on Consumer Protection.
                    </div>
                    <button class="appeal-button" onclick="selectAppealTemplate('general')">Use Template</button>
                </div>
                
                <div class="appeal-card">
                    <div class="appeal-title">2. Offering to Provide Evidence</div>
                    <div class="appeal-description">
                        When you can provide photos or documents to support your claim. Requests guidance on evidence submission.
                    </div>
                    <button class="appeal-button" onclick="selectAppealTemplate('evidence')">Use Template</button>
                </div>
                
                <div class="appeal-card">
                    <div class="appeal-title">3. Escalation Request</div>
                    <div class="appeal-description">
                        When your claim was rejected without proper justification. Requests escalation to a supervisor for review.
                    </div>
                    <button class="appeal-button" onclick="selectAppealTemplate('escalation')">Use Template</button>
                </div>
                
                <div class="appeal-card">
                    <div class="appeal-title">4. Full Policy Reference</div>
                    <div class="appeal-description">
                        Comprehensive appeal with concise policy references. Highlights legal requirements for evidence-based compensation decisions.
                    </div>
                    <button class="appeal-button" onclick="selectAppealTemplate('policy')">Use Template</button>
                </div>
            </div>
            
            <div id="appeal-form-container" class="appeal-form" style="display: none;">
                <h3 id="appeal-form-title">Appeal Form</h3>
                <div id="appeal-form-content"></div>
                <div class="appeal-preview" id="appeal-preview"></div>
                <div style="display: flex; gap: 10px; margin-top: 20px;">
                    <button class="btn" onclick="sendAppealEmail()">Send Appeal</button>
                    <button class="btn btn-secondary" onclick="cancelAppeal()">Cancel</button>
                </div>
            </div>
            
            <div class="legal-reference">
                <h4>Legal Reference: UAE Consumer Protection Law</h4>
                <p>Federal Law No. 15 of 2020 on Consumer Protection requires suppliers to justify any compensation deductions with clear documentation. Suppliers must provide verifiable evidence for any compensation claims rejection or modification.</p>
                <p>For more information: <a href="https://www.moe.gov.ae/en" target="_blank">Ministry of Education - UAE Government Portal</a></p>
            </div>
        </div>
    </div>

    <script>
        // Previous JavaScript functions remain the same
        
        // Appeal templates
        const appealTemplates = {
            general: {
                title: "General Appeal – No Evidence Provided",
                subject: "Reversal Requested – Compensation Cancellation (Order [Order Number])",
                body: `Dear Noon Support,

My compensation request for Order [Order Number], cancelled due to "[reason]", lacks any supporting evidence (such as dated photos or documentation). Under Federal Law No. 15 of 2020 on Consumer Protection, suppliers must justify any compensation deductions with clear documentation.

Please reverse this decision unless valid evidence is provided.

Thank you,
[Your Name]`
            },
            evidence: {
                title: "Offering to Provide Evidence",
                subject: "Evidence for Compensation Appeal – Order [Order Number]",
                body: `Hello Noon Support,

My compensation for Order [Order Number] was cancelled without evidence. I can provide photos or other documents to support my claim. Please advise how I can submit these to enable reconsideration.

Thank you,
[Your Name]`
            },
            escalation: {
                title: "Escalation Request",
                subject: "Escalation – Compensation Rejection – Order [Order Number]",
                body: `Dear Noon Support,

My compensation claim for Order [Order Number] was rejected without justification. Please escalate this case to a supervisor or manager for a fair review.

Thank you for your urgency.

Best regards,
[Your Name]`
            },
            policy: {
                title: "Full Policy Reference (Concise)",
                subject: "Compensation Reversal Request – Order [Order Number]",
                body: `Hello Noon Support,

My claim for Order [Order Number] was refused citing "[reason]", but no evidence was provided. Under the updated Consumer Protection Law (incorporating Federal Law No. 15/2020 and its Executive Regulations), any deduction must be verifiably justified.

Please reverse the decision or share documentation immediately.

Regards,
[Your Name]`
            }
        };
        
        // Select appeal template
        function selectAppealTemplate(type) {
            const template = appealTemplates[type];
            const formContainer = document.getElementById('appeal-form-container');
            const formTitle = document.getElementById('appeal-form-title');
            const formContent = document.getElementById('appeal-form-content');
            const preview = document.getElementById('appeal-preview');
            
            // Set form title
            formTitle.textContent = template.title;
            
            // Create form content
            formContent.innerHTML = `
                <div class="form-group">
                    <label>Order Number</label>
                    <input type="text" id="appeal-order-number" placeholder="e.g. FF97NN6YOH1H65A" required>
                </div>
                
                <div class="form-group">
                    <label>Reason for Compensation Cancellation</label>
                    <input type="text" id="appeal-reason" placeholder="e.g. Missing item" required>
                </div>
                
                <div class="form-group">
                    <label>Your Name</label>
                    <input type="text" id="appeal-name" placeholder="Your full name" required>
                </div>
                
                <div class="form-group">
                    <label>Recipient Email</label>
                    <input type="email" id="appeal-recipient" placeholder="support@noon.com" required>
                </div>
            `;
            
            // Show form and update preview
            formContainer.style.display = 'block';
            updateAppealPreview(type);
            
            // Add event listeners to update preview on input change
            ['appeal-order-number', 'appeal-reason', 'appeal-name'].forEach(id => {
                document.getElementById(id).addEventListener('input', () => updateAppealPreview(type));
            });
        }
        
        // Update appeal preview
        function updateAppealPreview(type) {
            const template = appealTemplates[type];
            const orderNumber = document.getElementById('appeal-order-number').value || '[Order Number]';
            const reason = document.getElementById('appeal-reason').value || '[reason]';
            const name = document.getElementById('appeal-name').value || '[Your Name]';
            
            const subject = template.subject.replace(/\[Order Number\]/g, orderNumber);
            const body = template.body
                .replace(/\[Order Number\]/g, orderNumber)
                .replace(/\[reason\]/g, reason)
                .replace(/\[Your Name\]/g, name);
            
            document.getElementById('appeal-preview').textContent = `Subject: ${subject}\n\n${body}`;
        }
        
        // Send appeal email
        function sendAppealEmail() {
            const recipient = document.getElementById('appeal-recipient').value;
            const subject = document.querySelector('#appeal-preview').textContent.split('\n')[0].replace('Subject: ', '');
            const body = document.querySelector('#appeal-preview').textContent.split('\n').slice(2).join('\n');
            
            if (!recipient) {
                alert('Please enter recipient email address');
                return;
            }
            
            // Show loading state
            const sendBtn = event.target;
            sendBtn.disabled = true;
            sendBtn.innerHTML = '<span class="spinner"></span>Sending...';
            
            // Simulate sending email
            setTimeout(() => {
                // Reset button
                sendBtn.disabled = false;
                sendBtn.innerHTML = 'Send Appeal';
                
                // Show success notification
                showNotification('appeals-notification', 
                    `Appeal email sent successfully to ${recipient}`, 
                    'success');
                
                // Reset form
                cancelAppeal();
            }, 2000);
        }
        
        // Cancel appeal
        function cancelAppeal() {
            document.getElementById('appeal-form-container').style.display = 'none';
            // Reset form fields
            ['appeal-order-number', 'appeal-reason', 'appeal-name', 'appeal-recipient'].forEach(id => {
                document.getElementById(id).value = '';
            });
        }
        
        // Show notification helper
        function showNotification(containerId, message, type) {
            const container = document.getElementById(containerId) || document.body;
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.innerHTML = `
                <div class="notification-icon">${type === 'success' ? '✅' : '❌'}</div>
                <div>${message}</div>
            `;
            
            container.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 5000);
        }
    </script>
</body>
</html>
