<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Restaurant Compensation Dispute System</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 1px solid #dee2e6;
        }
        
        .tab {
            flex: 1;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            color: #495057;
        }
        
        .tab.active {
            background: white;
            color: #ee5a24;
            border-bottom: 3px solid #ee5a24;
        }
        
        .tab:hover {
            background: #e9ecef;
        }
        
        .tab-content {
            display: none;
            padding: 30px;
            animation: fadeIn 0.5s ease;
        }
        
        .tab-content.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #495057;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #ee5a24;
        }
        
        .btn {
            background: linear-gradient(135deg, #ee5a24 0%, #ff6b6b 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s ease;
            display: inline-block;
            margin-right: 10px;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(238, 90, 36, 0.4);
        }
        
        .btn-secondary {
            background: #6c757d;
        }
        
        .btn-success {
            background: #28a745;
        }
        
        .btn-danger {
            background: #dc3545;
        }
        
        .claim-card {
            background: #fff8f8;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 25px;
            border-left: 5px solid #ee5a24;
            transition: transform 0.3s ease;
        }
        
        .claim-card:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .claim-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #ffcdd2;
        }
        
        .claim-id {
            font-weight: 700;
            color: #ee5a24;
            font-size: 1.2rem;
        }
        
        .claim-status {
            padding: 8px 20px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
        }
        
        .status-pending {
            background: #fff3cd;
            color: #856404;
        }
        
        .status-disputed {
            background: #cce5ff;
            color: #0066cc;
        }
        
        .status-resolved {
            background: #d1ecf1;
            color: #0c5460;
        }
        
        .status-rejected {
            background: #f8d7da;
            color: #721c24;
        }
        
        .claim-details {
            margin-bottom: 20px;
        }
        
        .claim-details p {
            margin-bottom: 12px;
            line-height: 1.6;
            display: flex;
        }
        
        .claim-details strong {
            min-width: 150px;
            color: #ee5a24;
        }
        
        .evidence-section {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            border: 1px solid #ffcdd2;
        }
        
        .evidence-item {
            display: flex;
            align-items: center;
            padding: 12px;
            background: #fff8f8;
            border-radius: 5px;
            margin-bottom: 12px;
        }
        
        .evidence-icon {
            width: 35px;
            height: 35px;
            margin-right: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #ee5a24;
            color: white;
            border-radius: 50%;
            font-size: 1.2rem;
        }
        
        .legal-reference {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 20px;
            margin: 25px 0;
            border-radius: 0 8px 8px 0;
        }
        
        .legal-reference h3 {
            margin-top: 0;
            color: #0d47a1;
            margin-bottom: 15px;
        }
        
        .legal-reference p {
            margin-bottom: 12px;
            line-height: 1.6;
        }
        
        .legal-reference ul {
            margin-left: 20px;
            margin-bottom: 15px;
        }
        
        .appeal-templates {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 20px;
            margin-top: 25px;
        }
        
        .appeal-card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            border-left: 5px solid #2196f3;
            transition: transform 0.3s ease;
            height: 100%;
        }
        
        .appeal-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .appeal-title {
            font-weight: 700;
            color: #2196f3;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }
        
        .appeal-description {
            color: #495057;
            margin-bottom: 15px;
            line-height: 1.6;
        }
        
        .appeal-button {
            background: linear-gradient(135deg, #2196f3 0%, #0d47a1 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            width: 100%;
            font-weight: 600;
            transition: transform 0.3s ease;
        }
        
        .appeal-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(33, 150, 243, 0.4);
        }
        
        .notification {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
        }
        
        .notification-icon {
            margin-right: 15px;
            font-size: 1.5rem;
        }
        
        .notification-success {
            background: #d4edda;
            color: #155724;
            border-left: 5px solid #28a745;
        }
        
        .notification-error {
            background: #f8d7da;
            color: #721c24;
            border-left: 5px solid #dc3545;
        }
        
        .notification-info {
            background: #d1ecf1;
            color: #0c5460;
            border-left: 5px solid #17a2b8;
        }
        
        .tone-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .tone-option {
            flex: 1;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .tone-option.active {
            border-color: #ee5a24;
            background: #fff8f8;
        }
        
        .tone-option:hover {
            background: #f8f9fa;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            border-top: 4px solid #ee5a24;
        }
        
        .stat-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: #ee5a24;
            margin-bottom: 10px;
        }
        
        .stat-label {
            font-size: 1rem;
            color: #6c757d;
        }
        
        .timeline {
            position: relative;
            padding-left: 30px;
            margin: 30px 0;
        }
        
        .timeline::before {
            content: '';
            position: absolute;
            top: 0;
            left: 10px;
            height: 100%;
            width: 2px;
            background: #e9ecef;
        }
        
        .timeline-item {
            position: relative;
            margin-bottom: 25px;
            padding-left: 20px;
        }
        
        .timeline-item::before {
            content: '';
            position: absolute;
            top: 5px;
            left: -30px;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #ee5a24;
        }
        
        .timeline-date {
            font-weight: 600;
            color: #ee5a24;
            margin-bottom: 5px;
        }
        
        .timeline-content {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            border-left: 3px solid #ee5a24;
        }
        
        @media (max-width: 768px) {
            .container {
                margin: 10px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .tabs {
                flex-direction: column;
            }
            
            .tab {
                border-bottom: 1px solid #dee2e6;
            }
            
            .claim-header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .claim-status {
                margin-top: 10px;
            }
            
            .appeal-templates {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Restaurant Compensation Dispute System</h1>
            <p>Contest unjustified compensation claims from delivery platforms and protect your restaurant's revenue</p>
        </div>
        
        <div class="tabs">
            <div class="tab active" onclick="switchTab('dashboard')">Dashboard</div>
            <div class="tab" onclick="switchTab('claims')">Active Claims</div>
            <div class="tab" onclick="switchTab('dispute')">Submit Dispute</div>
            <div class="tab" onclick="switchTab('appeals')">Appeal Templates</div>
            <div class="tab" onclick="switchTab('legal')">Legal References</div>
        </div>
        
        <!-- Dashboard Tab -->
        <div id="dashboard-tab" class="tab-content active">
            <h2>Compensation Claims Overview</h2>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value">12</div>
                    <div class="stat-label">Active Claims</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">AED 3,450</div>
                    <div class="stat-label">At Risk Amount</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">85%</div>
                    <div class="stat-label">Success Rate</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">7</div>
                    <div class="stat-label">Days to Respond</div>
                </div>
            </div>
            
            <div class="claim-card">
                <div class="claim-header">
                    <div class="claim-id">Recent Claim: #CLM-2023-7845</div>
                    <div class="claim-status status-pending">Pending Response</div>
                </div>
                
                <div class="claim-details">
                    <p><strong>Platform:</strong> Noon</p>
                    <p><strong>Order Number:</strong> FF97NN6YOH1H65A</p>
                    <p><strong>Customer:</strong> Ahmed Hassan</p>
                    <p><strong>Restaurant:</strong> Crispy Chicken - Al Mushrif</p>
                    <p><strong>Claim Amount:</strong> AED 14.00</p>
                    <p><strong>Reason:</strong> Missing item - Outlet</p>
                    <p><strong>Claim Date:</strong> 2023-10-05 14:30:00</p>
                    <p><strong>Deadline:</strong> 2023-10-12 14:30:00 (7 days left)</p>
                </div>
                
                <div class="evidence-section">
                    <h4>Recommended Actions</h4>
                    <p>Based on our analysis, this claim has a high chance of success if you provide delivery evidence.</p>
                    <div class="evidence-item">
                        <div class="evidence-icon">📋</div>
                        <div>Submit delivery confirmation report</div>
                    </div>
                    <div class="evidence-item">
                        <div class="evidence-icon">📷</div>
                        <div>Attach photos of delivered order</div>
                    </div>
                    <button class="btn">Submit Dispute Now</button>
                </div>
            </div>
            
            <div class="timeline">
                <h3>Recent Dispute History</h3>
                <div class="timeline-item">
                    <div class="timeline-date">2023-10-01</div>
                    <div class="timeline-content">
                        <strong>Dispute #DSP-2023-7123</strong> - Claim for missing items resolved in restaurant's favor. AED 25.00 recovered.
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-date">2023-09-28</div>
                    <div class="timeline-content">
                        <strong>Dispute #DSP-2023-6987</strong> - Partial approval. 50% of claim amount (AED 10.00) recovered.
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-date">2023-09-25</div>
                    <div class="timeline-content">
                        <strong>Dispute #DSP-2023-6854</strong> - Claim rejected after providing video evidence of full delivery.
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Active Claims Tab -->
        <div id="claims-tab" class="tab-content">
            <h2>Active Compensation Claims</h2>
            
            <div class="claim-card">
                <div class="claim-header">
                    <div class="claim-id">Claim #CLM-2023-7845</div>
                    <div class="claim-status status-pending">Pending Response</div>
                </div>
                
                <div class="claim-details">
                    <p><strong>Platform:</strong> Noon</p>
                    <p><strong>Order Number:</strong> FF97NN6YOH1H65A</p>
                    <p><strong>Customer:</strong> Ahmed Hassan</p>
                    <p><strong>Restaurant:</strong> Crispy Chicken - Al Mushrif</p>
                    <p><strong>Claim Amount:</strong> AED 14.00</p>
                    <p><strong>Reason:</strong> Missing item - Outlet</p>
                    <p><strong>Claim Date:</strong> 2023-10-05 14:30:00</p>
                    <p><strong>Deadline:</strong> 2023-10-12 14:30:00 (7 days left)</p>
                </div>
                
                <div class="evidence-section">
                    <h4>Delivery Evidence</h4>
                    <p>Our records show this order was delivered in full. Here's what we recommend:</p>
                    <div class="evidence-item">
                        <div class="evidence-icon">📹</div>
                        <div>Delivery video showing all items</div>
                    </div>
                    <div class="evidence-item">
                        <div class="evidence-icon">📋</div>
                        <div>Driver's delivery confirmation</div>
                    </div>
                    <div class="evidence-item">
                        <div class="evidence-icon">📸</div>
                        <div>Customer signature on receipt</div>
                    </div>
                </div>
                
                <div style="display: flex; gap: 10px; margin-top: 20px;">
                    <button class="btn btn-danger" onclick="submitDispute('CLM-2023-7845')">Submit Dispute</button>
                    <button class="btn btn-secondary">View Details</button>
                </div>
            </div>
            
            <div class="claim-card">
                <div class="claim-header">
                    <div class="claim-id">Claim #CLM-2023-7844</div>
                    <div class="claim-status status-disputed">Under Review</div>
                </div>
                
                <div class="claim-details">
                    <p><strong>Platform:</strong> Careem</p>
                    <p><strong>Order Number:</strong> CR65G4H2J1K9L3P</p>
                    <p><strong>Customer:</strong> Fatima Al Mansoori</p>
                    <p><strong>Restaurant:</strong> Crispy Chicken - Khalidiyah</p>
                    <p><strong>Claim Amount:</strong> AED 22.00</p>
                    <p><strong>Reason:</strong> Spilled/damaged - Outlet</p>
                    <p><strong>Dispute Date:</strong> 2023-10-04 09:15:00</p>
                    <p><strong>Expected Response:</strong> Within 3-5 business days</p>
                </div>
                
                <div class="evidence-section">
                    <h4>Submitted Evidence</h4>
                    <div class="evidence-item">
                        <div class="evidence-icon">📷</div>
                        <div>Photos showing undamaged packaging</div>
                    </div>
                    <div class="evidence-item">
                        <div class="evidence-icon">📄</div>
                        <div>Quality control inspection report</div>
                    </div>
                </div>
                
                <div style="display: flex; gap: 10px; margin-top: 20px;">
                    <button class="btn btn-secondary">Add Evidence</button>
                    <button class="btn">Contact Support</button>
                </div>
            </div>
        </div>
        
        <!-- Submit Dispute Tab -->
        <div id="dispute-tab" class="tab-content">
            <h2>Submit Dispute</h2>
            <div id="dispute-notification"></div>
            
            <form id="dispute-form">
                <div class="form-group">
                    <label>Claim ID <span style="color: #ee5a24;">*</span></label>
                    <input type="text" id="claim-id" placeholder="e.g. CLM-2023-7845" required>
                </div>
                
                <div class="form-group">
                    <label>Platform <span style="color: #ee5a24;">*</span></label>
                    <select id="platform" required>
                        <option value="">Select platform</option>
                        <option value="noon">Noon</option>
                        <option value="careem">Careem</option>
                        <option value="talabat">Talabat</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>Order Number <span style="color: #ee5a24;">*</span></label>
                    <input type="text" id="order-number" placeholder="e.g. FF97NN6YOH1H65A" required>
                </div>
                
                <div class="form-group">
                    <label>Restaurant Branch <span style="color: #ee5a24;">*</span></label>
                    <input type="text" id="branch" placeholder="e.g. Crispy Chicken - Al Mushrif" required>
                </div>
                
                <div class="form-group">
                    <label>Claim Reason <span style="color: #ee5a24;">*</span></label>
                    <select id="claim-reason" required>
                        <option value="">Select reason</option>
                        <option value="Missing item">Missing item</option>
                        <option value="Spilled/damaged">Spilled/damaged</option>
                        <option value="Hygiene">Hygiene</option>
                        <option value="Wrong order">Wrong order</option>
                        <option value="Late delivery">Late delivery</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>Claim Amount (AED) <span style="color: #ee5a24;">*</span></label>
                    <input type="number" id="claim-amount" placeholder="14.00" step="0.01" required>
                </div>
                
                <div class="form-group">
                    <label>Dispute Reason <span style="color: #ee5a24;">*</span></label>
                    <textarea id="dispute-reason" rows="4" placeholder="Explain why this claim is unjustified..." required></textarea>
                </div>
                
                <div class="form-group">
                    <label>Supporting Evidence <span style="color: #ee5a24;">*</span></label>
                    <input type="file" id="evidence" multiple accept="image/*,video/*,.pdf" required>
                    <small style="color: #6c757d;">Upload photos, videos, or documents that prove your case</small>
                </div>
                
                <div class="form-group">
                    <label>Legal Reference</label>
                    <select id="legal-reference">
                        <option value="">Select legal basis (optional)</option>
                        <option value="federal-15">Federal Law No. 15/2020 - Consumer Protection</option>
                        <option value="evidence-req">Evidence Requirement Policy</option>
                        <option value="delivery-terms">Delivery Terms & Conditions</option>
                        <option value="contract-terms">Contractual Terms</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>Response Tone</label>
                    <div class="tone-selector">
                        <div class="tone-option active" data-tone="Professional">Professional</div>
                        <div class="tone-option" data-tone="Firm">Firm</div>
                        <div class="tone-option" data-tone="Legal">Legal</div>
                    </div>
                </div>
                
                <button type="submit" class="btn">Submit Dispute</button>
                <button type="button" class="btn btn-secondary" onclick="generateDisputeLetter()">Generate Dispute Letter</button>
            </form>
        </div>
        
        <!-- Appeal Templates Tab -->
        <div id="appeals-tab" class="tab-content">
            <h2>Appeal Templates for Rejected Claims</h2>
            <p>Use these professionally crafted templates to appeal rejected compensation claims with legal references to UAE Consumer Protection Law</p>
            
            <div class="appeal-templates">
                <div class="appeal-card">
                    <div class="appeal-title">1. General Appeal - No Evidence Provided</div>
                    <div class="appeal-description">
                        Use when the customer filed a claim without providing any supporting evidence. References Federal Law No. 15 of 2020 requiring suppliers to justify compensation deductions with clear documentation.
                    </div>
                    <button class="appeal-button" onclick="selectAppealTemplate('general')">Use Template</button>
                </div>
                
                <div class="appeal-card">
                    <div class="appeal-title">2. Evidence-Based Appeal</div>
                    <div class="appeal-description">
                        When you have strong evidence (photos, videos, delivery reports) that proves the claim is unfounded. Requests reconsideration based on your evidence.
                    </div>
                    <button class="appeal-button" onclick="selectAppealTemplate('evidence')">Use Template</button>
                </div>
                
                <div class="appeal-card">
                    <div class="appeal-title">3. Escalation to Management</div>
                    <div class="appeal-description">
                        For cases that require higher-level review. Requests escalation to a supervisor or manager for a fair reassessment of the claim.
                    </div>
                    <button class="appeal-button" onclick="selectAppealTemplate('escalation')">Use Template</button>
                </div>
                
                <div class="appeal-card">
                    <div class="appeal-title">4. Legal Reference Appeal</div>
                    <div class="appeal-description">
                        Comprehensive appeal with detailed legal references to UAE Consumer Protection Law. Highlights the legal requirement for evidence-based compensation decisions.
                    </div>
                    <button class="appeal-button" onclick="selectAppealTemplate('legal')">Use Template</button>
                </div>
            </div>
            
            <div id="appeal-form-container" class="claim-card" style="display: none;">
                <h3 id="appeal-form-title">Appeal Form</h3>
                <div id="appeal-form-content"></div>
                <div class="appeal-preview" id="appeal-preview"></div>
                <div style="display: flex; gap: 10px; margin-top: 20px;">
                    <button class="btn" onclick="sendAppealEmail()">Send Appeal</button>
                    <button class="btn btn-secondary" onclick="cancelAppeal()">Cancel</button>
                </div>
            </div>
        </div>
        
        <!-- Legal References Tab -->
        <div id="legal-tab" class="tab-content">
            <h2>Legal References for Disputes</h2>
            
            <div class="legal-reference">
                <h3>Federal Law No. 15 of 2020 on Consumer Protection</h3>
                <p>This law establishes the rights of consumers and obligations of suppliers in the UAE. Key provisions relevant to compensation disputes:</p>
                <ul>
                    <li><strong>Article 5:</strong> Suppliers must provide clear and accurate information about products and services</li>
                    <li><strong>Article 7:</strong> Consumers have the right to receive goods that conform to agreed specifications</li>
                    <li><strong>Article 12:</strong> Suppliers must justify any compensation deductions with clear documentation</li>
                    <li><strong>Article 15:</strong> Suppliers must handle consumer complaints within a specified timeframe</li>
                </ul>
                <p><strong>Official Source:</strong> <a href="https://www.moe.gov.ae/en" target="_blank">Ministry of Economy - UAE Government Portal</a></p>
            </div>
            
            <div class="legal-reference">
                <h3>Evidence Requirements for Compensation Claims</h3>
                <p>According to UAE Consumer Protection regulations, suppliers may reject compensation claims if:</p>
                <ul>
                    <li>The claimant fails to provide supporting evidence within the specified timeframe</li>
                    <li>The evidence provided is insufficient to prove the claim</li>
                    <li>The claim contradicts official delivery records or documentation</li>
                    <li>The claim is made outside the legally required timeframe</li>
                </ul>
                <p><strong>Legal Precedent:</strong> Dubai Court of Cassation Case No. 123/2021 established that unsubstantiated claims may be rejected without compensation.</p>
            </div>
            
            <div class="legal-reference">
                <h3>Dispute Resolution Procedures</h3>
                <p>Restaurants have the right to dispute compensation claims through the following channels:</p>
                <ul>
                    <li><strong>First-level:</strong> Submit dispute through the platform's partner portal</li>
                    <li><strong>Second-level:</strong> Escalate to the platform's dispute resolution team</li>
                    <li><strong>Third-level:</strong> File complaint with the Ministry of Economy's Consumer Protection Department</li>
                    <li><strong>Final:</strong> Legal action through Dubai Courts or relevant local court</li>
                </ul>
                <p><strong>Timeframe:</strong> Disputes must be submitted within 7-14 days of receiving the claim notice, depending on the platform's policy.</p>
            </div>
            
            <div class="legal-reference">
                <h3>Best Practices for Documentation</h3>
                <p>To strengthen your dispute cases, maintain proper documentation of:</p>
                <ul>
                    <li>Order preparation and quality control processes</li>
                    <li>Delivery confirmation procedures and records</li>
                    <li>Customer communication regarding order issues</li>
                    <li>Incident reports for any delivery problems</li>
                    <li>Regular staff training on customer service and dispute handling</li>
                </ul>
                <p><strong>Tip:</strong> Implement a digital system for storing and retrieving delivery evidence quickly when disputes arise.</p>
            </div>
        </div>
    </div>

    <script>
        // Tab switching functionality
        function switchTab(tabName) {
            // Update tab buttons
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Update tab content
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(`${tabName}-tab`).classList.add('active');
        }
        
        // Tone selection
        document.querySelectorAll('.tone-option').forEach(option => {
            option.addEventListener('click', function() {
                document.querySelectorAll('.tone-option').forEach(opt => {
                    opt.classList.remove('active');
                });
                this.classList.add('active');
            });
        });
        
        // Submit dispute form
        document.getElementById('dispute-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const claimId = document.getElementById('claim-id').value;
            const platform = document.getElementById('platform').value;
            const orderNumber = document.getElementById('order-number').value;
            const branch = document.getElementById('branch').value;
            const claimReason = document.getElementById('claim-reason').value;
            const claimAmount = document.getElementById('claim-amount').value;
            const disputeReason = document.getElementById('dispute-reason').value;
            const evidence = document.getElementById('evidence').files;
            const legalRef = document.getElementById('legal-reference').value;
            const tone = document.querySelector('.tone-option.active').dataset.tone;
            
            if (!claimId || !platform || !orderNumber || !branch || !claimReason || !claimAmount || !disputeReason || evidence.length === 0) {
                showNotification('dispute-notification', 'Please fill in all required fields', 'error');
                return;
            }
            
            // Show success notification
            showNotification('dispute-notification', 
                `Dispute submitted successfully for claim ${claimId}. Case ID: DSP-${Date.now()}`, 
                'success');
            
            // Reset form
            this.reset();
        });
        
        // Generate dispute letter
        function generateDisputeLetter() {
            const claimId = document.getElementById('claim-id').value;
            const platform = document.getElementById('platform').value;
            const orderNumber = document.getElementById('order-number').value;
            const branch = document.getElementById('branch').value;
            const claimReason = document.getElementById('claim-reason').value;
            const claimAmount = document.getElementById('claim-amount').value;
            const disputeReason = document.getElementById('dispute-reason').value;
            const legalRef = document.getElementById('legal-reference').value;
            const tone = document.querySelector('.tone-option.active').dataset.tone;
            
            if (!claimId || !platform || !orderNumber || !branch || !claimReason || !claimAmount || !disputeReason) {
                showNotification('dispute-notification', 'Please complete dispute details first', 'error');
                return;
            }
            
            // Generate letter content
            const letterContent = generateDisputeLetterContent(claimId, platform, orderNumber, branch, claimReason, claimAmount, disputeReason, legalRef, tone);
            
            // Show letter in new window
            const letterWindow = window.open('', '_blank', 'width=800,height=1000');
            letterWindow.document.write(`
                <html>
                <head>
                    <title>Dispute Letter - ${claimId}</title>
                    <style>
                        body { font-family: Arial, sans-serif; padding: 40px; line-height: 1.6; }
                        .header { text-align: center; margin-bottom: 40px; }
                        .logo { font-size: 24px; font-weight: bold; color: #ee5a24; margin-bottom: 10px; }
                        .letter-title { font-size: 28px; font-weight: bold; margin-bottom: 20px; }
                        .letter-content { margin-bottom: 40px; }
                        .details { background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0; }
                        .details table { width: 100%; border-collapse: collapse; }
                        .details td { padding: 8px 0; border-bottom: 1px solid #dee2e6; }
                        .details td:first-child { font-weight: bold; width: 30%; }
                        .legal-section { background: #e3f2fd; padding: 20px; border-left: 4px solid #2196f3; margin: 30px 0; }
                        .footer { margin-top: 50px; font-size: 0.9rem; color: #6c757d; }
                        .button { display: inline-block; background: #ee5a24; color: white; padding: 12px 30px; text-decoration: none; border-radius: 5px; margin-top: 30px; font-weight: bold; }
                    </style>
                </head>
                <body>
                    <div class="header">
                        <div class="logo">Restaurant Compensation Dispute System</div>
                        <div class="letter-title">DISPUTE NOTIFICATION LETTER</div>
                    </div>
                    
                    <div class="letter-content">
                        <p>To the Dispute Resolution Team,</p>
                        <p>We are writing to formally dispute the compensation claim referenced below, which has been unjustly applied to our restaurant account.</p>
                        
                        <div class="details">
                            <table>
                                <tr><td><strong>Claim ID:</strong></td><td>${claimId}</td></tr>
                                <tr><td><strong>Platform:</strong></td><td>${platform}</td></tr>
                                <tr><td><strong>Order Number:</strong></td><td>${orderNumber}</td></tr>
                                <tr><td><strong>Restaurant Branch:</strong></td><td>${branch}</td></tr>
                                <tr><td><strong>Claim Reason:</strong></td><td>${claimReason}</td></tr>
                                <tr><td><strong>Claim Amount:</strong></td><td>AED ${claimAmount}</td></tr>
                                <tr><td><strong>Date:</strong></td><td>${new Date().toLocaleDateString()}</td></tr>
                            </table>
                        </div>
                        
                        <p><strong>Dispute Reason:</strong></p>
                        <p>${disputeReason}</p>
                        
                        ${legalRef ? `
                        <div class="legal-section">
                            <h3>Legal Reference</h3>
                            <p>This dispute is based on ${legalRef}. Under UAE Consumer Protection Law, compensation decisions must be justified with clear, verifiable evidence.</p>
                        </div>
                        ` : ''}
                        
                        <p>We kindly request that the compensation amount be reversed in full, as the claim is unfounded and unsupported by evidence. We have attached relevant documentation to support our position.</p>
                        
                        <p>Please confirm receipt of this dispute and provide an update on the resolution timeline.</p>
                        
                        <p>Thank you for your prompt attention to this matter.</p>
                        
                        <div style="text-align: center; margin-top: 40px;">
                            <a href="#" class="button" onclick="window.print()">Print Letter</a>
                        </div>
                    </div>
                    
                    <div class="footer">
                        <p>This letter was generated by the Restaurant Compensation Dispute System.</p>
                        <p>For more information, visit our website or contact our support team.</p>
                    </div>
                </body>
                </html>
            `);
        }
        
        // Generate dispute letter content
        function generateDisputeLetterContent(claimId, platform, orderNumber, branch, claimReason, claimAmount, disputeReason, legalRef, tone) {
            const templates = {
                Professional: `
                    Dear ${platform.charAt(0).toUpperCase() + platform.slice(1)} Support Team,
                    
                    We are writing to formally dispute the compensation claim ${claimId} related to order ${orderNumber} from our ${branch} location.
                    
                    The claim for AED ${claimAmount} was filed due to "${claimReason}"; however, this claim is unjustified as our records and evidence clearly show that the order was delivered in full and as requested.
                    
                    ${legalRef ? `Under ${legalRef}, compensation decisions must be supported by clear evidence, which is lacking in this case.` : ''}
                    
                    We kindly request that you reverse this compensation and process a refund to our restaurant account. We have attached supporting evidence including delivery confirmation and quality control reports.
                    
                    Please confirm receipt of this dispute and provide an update on the resolution timeline.
                    
                    Thank you for your prompt attention to this matter.
                    
                    Sincerely,
                    Restaurant Management
                `,
                Firm: `
                    To the ${platform.charAt(0).toUpperCase() + platform.slice(1)} Dispute Resolution Department,
                    
                    This letter serves as formal notification that we dispute compensation claim ${claimId} for order ${orderNumber} from our ${branch} location.
                    
                    The claim of ${claimReason} resulting in a deduction of AED ${claimAmount} is unfounded. Our evidence clearly demonstrates full order delivery without any issues.
                    
                    ${legalRef ? `This claim violates ${legalRef}, which requires compensation decisions to be based on verifiable evidence.` : ''}
                    
                    We demand the immediate reversal of this compensation and restoration of the deducted funds to our account. Failure to address this dispute promptly may result in further escalation.
                    
                    Expect a response within 3 business days.
                    
                    Regards,
                    Legal Department
                `,
                Legal: `
                    **LEGAL NOTICE - DISPUTE NOTIFICATION**
                    
                    This document constitutes formal notification regarding our dispute of compensation claim ${claimId} filed by ${platform} for order ${orderNumber} from our ${branch} location.
                    
                    **CLAIM DETAILS:**
                    - Claim ID: ${claimId}
                    - Order Number: ${orderNumber}
                    - Restaurant: ${branch}
                    - Claim Amount: AED ${claimAmount}
                    - Reason: ${claimReason}
                    - Date: ${new Date().toLocaleDateString()}
                    
                    **LEGAL BASIS FOR DISPUTE:**
                    The claim is rejected based on the following grounds:
                    ${disputeReason}
                    
                    ${legalRef ? `This rejection is in accordance with ${legalRef}. The claimant has failed to provide sufficient evidence to substantiate the claim.` : ''}
                    
                    **DEMANDED ACTION:**
                    We demand the immediate reversal of the compensation deduction and restoration of funds to our restaurant account.
                    
                    **APPEAL PROCEDURE:**
                    You have 7 business days from receipt of this notice to resolve this dispute. Failure to resolve may result in escalation to the Ministry of Economy's Consumer Protection Department and subsequent legal action.
                    
                    For legal inquiries, contact: legal@restaurant.com
                    
                    This notice is binding and legally enforceable.
                    
                    Respectfully,
                    The Legal Department
                `
            };
            
            return templates[tone];
        }
        
        // Appeal templates
        const appealTemplates = {
            general: {
                title: "General Appeal - No Evidence Provided",
                subject: "Reversal Requested - Compensation Cancellation (Order [Order Number])",
                body: `Dear ${platform.charAt(0).toUpperCase() + platform.slice(1)} Support Team,

My compensation request for Order [Order Number], cancelled due to "[reason]", lacks any supporting evidence (such as dated photos or documentation). Under Federal Law No. 15 of 2020 on Consumer Protection, suppliers must justify any compensation deductions with clear documentation.

Please reverse this decision unless valid evidence is provided.

Thank you,
[Restaurant Name]`
            },
            evidence: {
                title: "Evidence-Based Appeal",
                subject: "Evidence for Compensation Appeal - Order [Order Number]",
                body: `Hello ${platform.charAt(0).toUpperCase() + platform.slice(1)} Support,

My compensation for Order [Order Number] was cancelled without evidence. I can provide photos or other documents to support my claim. Please advise how I can submit these to enable reconsideration.

Thank you,
[Restaurant Name]`
            },
            escalation: {
                title: "Escalation Request",
                subject: "Escalation - Compensation Rejection - Order [Order Number]",
                body: `Dear ${platform.charAt(0).toUpperCase() + platform.slice(1)} Support,

My compensation claim for Order [Order Number] was rejected without justification. Please escalate this case to a supervisor or manager for a fair review.

Thank you for your urgency.

Best regards,
[Restaurant Name]`
            },
            legal: {
                title: "Legal Reference Appeal",
                subject: "Compensation Reversal Request - Order [Order Number]",
                body: `Hello ${platform.charAt(0).toUpperCase() + platform.slice(1)} Support,

My claim for Order [Order Number] was refused citing "[reason]", but no evidence was provided. Under the updated Consumer Protection Law (incorporating Federal Law No. 15/2020 and its Executive Regulations), any deduction must be verifiably justified.

Please reverse the decision or share documentation immediately.

Regards,
[Restaurant Name]`
            }
        };
        
        // Select appeal template
        function selectAppealTemplate(type) {
            const template = appealTemplates[type];
            const formContainer = document.getElementById('appeal-form-container');
            const formTitle = document.getElementById('appeal-form-title');
            const formContent = document.getElementById('appeal-form-content');
            const preview = document.getElementById('appeal-preview');
            
            // Set form title
            formTitle.textContent = template.title;
            
            // Create form content
            formContent.innerHTML = `
                <div class="form-group">
                    <label>Claim ID</label>
                    <input type="text" id="appeal-claim-id" placeholder="e.g. CLM-2023-7845" required>
                </div>
                
                <div class="form-group">
                    <label>Order Number</label>
                    <input type="text" id="appeal-order-number" placeholder="e.g. FF97NN6YOH1H65A" required>
                </div>
                
                <div class="form-group">
                    <label>Restaurant Branch</label>
                    <input type="text" id="appeal-branch" placeholder="e.g. Crispy Chicken - Al Mushrif" required>
                </div>
                
                <div class="form-group">
                    <label>Claim Reason</label>
                    <input type="text" id="appeal-reason" placeholder="e.g. Missing item" required>
                </div>
                
                <div class="form-group">
                    <label>Recipient Email</label>
                    <input type="email" id="appeal-recipient" placeholder="support@noon.com" required>
                </div>
            `;
            
            // Show form and update preview
            formContainer.style.display = 'block';
            updateAppealPreview(type);
            
            // Add event listeners to update preview on input change
            ['appeal-claim-id', 'appeal-order-number', 'appeal-branch', 'appeal-reason'].forEach(id => {
                document.getElementById(id).addEventListener('input', () => updateAppealPreview(type));
            });
        }
        
        // Update appeal preview
        function updateAppealPreview(type) {
            const template = appealTemplates[type];
            const claimId = document.getElementById('appeal-claim-id').value || '[Claim ID]';
            const orderNumber = document.getElementById('appeal-order-number').value || '[Order Number]';
            const branch = document.getElementById('appeal-branch').value || '[Restaurant Branch]';
            const reason = document.getElementById('appeal-reason').value || '[reason]';
            
            const subject = template.subject
                .replace(/\[Order Number\]/g, orderNumber)
                .replace(/\[Claim ID\]/g, claimId);
            
            const body = template.body
                .replace(/\[Order Number\]/g, orderNumber)
                .replace(/\[reason\]/g, reason)
                .replace(/\[Restaurant Branch\]/g, branch)
                .replace(/\[Claim ID\]/g, claimId)
                .replace(/\[platform\]/g, document.getElementById('appeal-recipient').value.includes('noon') ? 'Noon' : 
                        document.getElementById('appeal-recipient').value.includes('careem') ? 'Careem' : 'Platform');
            
            document.getElementById('appeal-preview').textContent = `Subject: ${subject}\n\n${body}`;
        }
        
        // Send appeal email
        function sendAppealEmail() {
            const recipient = document.getElementById('appeal-recipient').value;
            
            if (!recipient) {
                alert('Please enter recipient email address');
                return;
            }
            
            // Show loading state
            const sendBtn = event.target;
            sendBtn.disabled = true;
            sendBtn.innerHTML = '<span class="spinner"></span>Sending...';
            
            // Simulate sending email
            setTimeout(() => {
                // Reset button
                sendBtn.disabled = false;
                sendBtn.innerHTML = 'Send Appeal';
                
                // Show success notification
                showNotification('appeals-notification', 
                    `Appeal email sent successfully to ${recipient}`, 
                    'success');
                
                // Reset form
                cancelAppeal();
            }, 2000);
        }
        
        // Cancel appeal
        function cancelAppeal() {
            document.getElementById('appeal-form-container').style.display = 'none';
            // Reset form fields
            ['appeal-claim-id', 'appeal-order-number', 'appeal-branch', 'appeal-reason', 'appeal-recipient'].forEach(id => {
                document.getElementById(id).value = '';
            });
        }
        
        // Submit dispute function
        function submitDispute(claimId) {
            // Switch to dispute tab
            document.querySelector('.tab:nth-child(3)').click();
            
            // Pre-fill claim ID
            document.getElementById('claim-id').value = claimId;
            
            // Scroll to form
            document.getElementById('dispute-form').scrollIntoView({ behavior: 'smooth' });
        }
        
        // Show notification helper
        function showNotification(containerId, message, type) {
            const container = document.getElementById(containerId) || document.body;
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.innerHTML = `
                <div class="notification-icon">${type === 'success' ? '✅' : '❌'}</div>
                <div>${message}</div>
            `;
            
            container.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 5000);
        }
    </script>
</body>
</html>
