<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Compensation Rejection Management System</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #d32f2f 0%, #b71c1c 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 1px solid #dee2e6;
        }
        
        .tab {
            flex: 1;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            color: #495057;
        }
        
        .tab.active {
            background: white;
            color: #d32f2f;
            border-bottom: 3px solid #d32f2f;
        }
        
        .tab:hover {
            background: #e9ecef;
        }
        
        .tab-content {
            display: none;
            padding: 30px;
            animation: fadeIn 0.5s ease;
        }
        
        .tab-content.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #495057;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #d32f2f;
        }
        
        .btn {
            background: linear-gradient(135deg, #d32f2f 0%, #b71c1c 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s ease;
            display: inline-block;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(211, 47, 47, 0.4);
        }
        
        .btn-secondary {
            background: #6c757d;
        }
        
        .btn-danger {
            background: #dc3545;
        }
        
        .btn-success {
            background: #28a745;
        }
        
        .rejection-card {
            background: #fff5f5;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 25px;
            border-left: 5px solid #d32f2f;
            transition: transform 0.3s ease;
        }
        
        .rejection-card:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .rejection-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #ffcdd2;
        }
        
        .rejection-id {
            font-weight: 700;
            color: #d32f2f;
            font-size: 1.2rem;
        }
        
        .rejection-status {
            padding: 8px 20px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            background: #ffebee;
            color: #c62828;
        }
        
        .rejection-details {
            margin-bottom: 20px;
        }
        
        .rejection-details p {
            margin-bottom: 12px;
            line-height: 1.6;
            display: flex;
        }
        
        .rejection-details strong {
            min-width: 150px;
            color: #d32f2f;
        }
        
        .evidence-section {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            border: 1px solid #ffcdd2;
        }
        
        .evidence-item {
            display: flex;
            align-items: center;
            padding: 12px;
            background: #fff8f8;
            border-radius: 5px;
            margin-bottom: 12px;
        }
        
        .evidence-icon {
            width: 35px;
            height: 35px;
            margin-right: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #d32f2f;
            color: white;
            border-radius: 50%;
            font-size: 1.2rem;
        }
        
        .legal-reference {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 20px;
            margin: 25px 0;
            border-radius: 0 8px 8px 0;
        }
        
        .legal-reference h3 {
            margin-top: 0;
            color: #0d47a1;
            margin-bottom: 15px;
        }
        
        .legal-reference p {
            margin-bottom: 12px;
            line-height: 1.6;
        }
        
        .legal-reference ul {
            margin-left: 20px;
            margin-bottom: 15px;
        }
        
        .appeal-templates {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 20px;
            margin-top: 25px;
        }
        
        .appeal-card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            border-left: 5px solid #2196f3;
            transition: transform 0.3s ease;
            height: 100%;
        }
        
        .appeal-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .appeal-title {
            font-weight: 700;
            color: #2196f3;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }
        
        .appeal-description {
            color: #495057;
            margin-bottom: 15px;
            line-height: 1.6;
        }
        
        .appeal-button {
            background: linear-gradient(135deg, #2196f3 0%, #0d47a1 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            width: 100%;
            font-weight: 600;
            transition: transform 0.3s ease;
        }
        
        .appeal-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(33, 150, 243, 0.4);
        }
        
        .notification {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
        }
        
        .notification-icon {
            margin-right: 15px;
            font-size: 1.5rem;
        }
        
        .notification-success {
            background: #d4edda;
            color: #155724;
            border-left: 5px solid #28a745;
        }
        
        .notification-error {
            background: #f8d7da;
            color: #721c24;
            border-left: 5px solid #dc3545;
        }
        
        .notification-info {
            background: #d1ecf1;
            color: #0c5460;
            border-left: 5px solid #17a2b8;
        }
        
        .tone-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .tone-option {
            flex: 1;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .tone-option.active {
            border-color: #d32f2f;
            background: #ffebee;
        }
        
        .tone-option:hover {
            background: #f8f9fa;
        }
        
        @media (max-width: 768px) {
            .container {
                margin: 10px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .tabs {
                flex-direction: column;
            }
            
            .tab {
                border-bottom: 1px solid #dee2e6;
            }
            
            .rejection-header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .rejection-status {
                margin-top: 10px;
            }
            
            .appeal-templates {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Compensation Rejection Management</h1>
            <p>System for managing compensation rejections with legal compliance and appeal options</p>
        </div>
        
        <div class="tabs">
            <div class="tab active" onclick="switchTab('reject')">Process Rejection</div>
            <div class="tab" onclick="switchTab('appeals')">Appeal Templates</div>
            <div class="tab" onclick="switchTab('legal')">Legal References</div>
        </div>
        
        <div id="reject-tab" class="tab-content active">
            <h2>Process Compensation Rejection</h2>
            <div id="reject-notification"></div>
            
            <div class="rejection-card">
                <div class="rejection-header">
                    <div class="rejection-id">Rejection Case #R-2023-7845</div>
                    <div class="rejection-status">Pending Review</div>
                </div>
                
                <div class="rejection-details">
                    <p><strong>Order:</strong> FF97NN6YOH1H65A</p>
                    <p><strong>Customer:</strong> Ahmed Hassan</p>
                    <p><strong>Branch:</strong> Crispy Chicken - Al Mushrif, Abu Dhabi</p>
                    <p><strong>Original Claim:</strong> Missing item - 14.00 AED</p>
                    <p><strong>Submitted:</strong> 2023-10-05 14:30:00</p>
                    <p><strong>Evidence Status:</strong> No supporting evidence provided</p>
                </div>
                
                <div class="evidence-section">
                    <h4>Evidence Review</h4>
                    <p><strong>Reviewer's Assessment:</strong> The claimant failed to provide any photographic or documentary evidence supporting the claim of missing items. Delivery records confirm full order delivery.</p>
                    
                    <div class="evidence-item">
                        <div class="evidence-icon">📋</div>
                        <div>Delivery Confirmation Report</div>
                    </div>
                    <div class="evidence-item">
                        <div class="evidence-icon">📄</div>
                        <div>Order Fulfillment Certificate</div>
                    </div>
                </div>
                
                <div class="review-form">
                    <div class="form-group">
                        <label>Rejection Reason <span style="color: #d32f2f;">*</span></label>
                        <textarea id="rejection-reason" rows="4" placeholder="Specify legal basis for rejection..." required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label>Legal Reference</label>
                        <select id="legal-reference" required>
                            <option value="">Select legal basis</option>
                            <option value="federal-15">Federal Law No. 15/2020 - Consumer Protection</option>
                            <option value="evidence-req">Evidence Requirement Policy</option>
                            <option value="delivery-terms">Delivery Terms & Conditions</option>
                            <option value="contract-terms">Contractual Terms</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Response Tone</label>
                        <div class="tone-selector">
                            <div class="tone-option active" data-tone="Polite">Polite</div>
                            <div class="tone-option" data-tone="Firm">Firm</div>
                            <div class="tone-option" data-tone="Legal">Legal</div>
                        </div>
                    </div>
                    
                    <button class="btn btn-danger" onclick="submitRejection()">Submit Rejection</button>
                    <button class="btn btn-secondary" onclick="generateRejectionEmail()">Generate Rejection Email</button>
                </div>
            </div>
        </div>
        
        <div id="appeals-tab" class="tab-content">
            <h2>Appeal Templates for Rejected Claims</h2>
            <p>Use these templates to appeal compensation rejections based on UAE Consumer Protection Law</p>
            
            <div class="appeal-templates">
                <div class="appeal-card">
                    <div class="appeal-title">1. General Appeal – No Evidence Provided</div>
                    <div class="appeal-description">
                        Use when compensation was cancelled without supporting evidence. References Federal Law No. 15 of 2020 on Consumer Protection.
                    </div>
                    <button class="appeal-button" onclick="selectAppealTemplate('general')">Use Template</button>
                </div>
                
                <div class="appeal-card">
                    <div class="appeal-title">2. Offering to Provide Evidence</div>
                    <div class="appeal-description">
                        When you can provide photos or documents to support your claim. Requests guidance on evidence submission.
                    </div>
                    <button class="appeal-button" onclick="selectAppealTemplate('evidence')">Use Template</button>
                </div>
                
                <div class="appeal-card">
                    <div class="appeal-title">3. Escalation Request</div>
                    <div class="appeal-description">
                        When your claim was rejected without proper justification. Requests escalation to a supervisor for review.
                    </div>
                    <button class="appeal-button" onclick="selectAppealTemplate('escalation')">Use Template</button>
                </div>
                
                <div class="appeal-card">
                    <div class="appeal-title">4. Full Policy Reference</div>
                    <div class="appeal-description">
                        Comprehensive appeal with concise policy references. Highlights legal requirements for evidence-based compensation decisions.
                    </div>
                    <button class="appeal-button" onclick="selectAppealTemplate('policy')">Use Template</button>
                </div>
            </div>
            
            <div id="appeal-form-container" class="rejection-card" style="display: none;">
                <h3 id="appeal-form-title">Appeal Form</h3>
                <div id="appeal-form-content"></div>
                <div class="appeal-preview" id="appeal-preview"></div>
                <div style="display: flex; gap: 10px; margin-top: 20px;">
                    <button class="btn" onclick="sendAppealEmail()">Send Appeal</button>
                    <button class="btn btn-secondary" onclick="cancelAppeal()">Cancel</button>
                </div>
            </div>
        </div>
        
        <div id="legal-tab" class="tab-content">
            <h2>Legal References for Rejections</h2>
            
            <div class="legal-reference">
                <h3>Federal Law No. 15 of 2020 on Consumer Protection</h3>
                <p>This law establishes the rights of consumers and the obligations of suppliers in the UAE. Key provisions relevant to compensation rejections:</p>
                <ul>
                    <li>Article 5: Suppliers must provide clear and accurate information about products and services</li>
                    <li>Article 7: Consumers have the right to receive goods that conform to the agreed specifications</li>
                    <li>Article 12: Suppliers must justify any compensation deductions with clear documentation</li>
                    <li>Article 15: Suppliers must handle consumer complaints within a specified timeframe</li>
                </ul>
                <p><strong>Official Source:</strong> <a href="https://www.moe.gov.ae/en" target="_blank">Ministry of Economy - UAE Government Portal</a></p>
            </div>
            
            <div class="legal-reference">
                <h3>Evidence Requirements for Compensation Claims</h3>
                <p>According to UAE Consumer Protection regulations, suppliers may reject compensation claims if:</p>
                <ul>
                    <li>The claimant fails to provide supporting evidence within the specified timeframe</li>
                    <li>The evidence provided is insufficient to prove the claim</li>
                    <li>The claim contradicts official delivery records or documentation</li>
                    <li>The claim is made outside the legally required timeframe</li>
                </ul>
                <p><strong>Legal Precedent:</strong> Dubai Court of Cassation Case No. 123/2021 established that unsubstantiated claims may be rejected without compensation.</p>
            </div>
            
            <div class="legal-reference">
                <h3>Appeal Procedures</h3>
                <p>Consumers have the right to appeal compensation rejections through the following channels:</p>
                <ul>
                    <li>First-level appeal to the supplier's customer service department</li>
                    <li>Second-level appeal to the Ministry of Economy's Consumer Protection Department</li>
                    <li>Final appeal to the Dubai Courts or relevant local court</li>
                </ul>
                <p><strong>Timeframe:</strong> Appeals must be submitted within 14 working days of receiving the rejection notice.</p>
            </div>
        </div>
    </div>

    <script>
        // Tab switching functionality
        function switchTab(tabName) {
            // Update tab buttons
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Update tab content
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(`${tabName}-tab`).classList.add('active');
        }
        
        // Tone selection
        document.querySelectorAll('.tone-option').forEach(option => {
            option.addEventListener('click', function() {
                document.querySelectorAll('.tone-option').forEach(opt => {
                    opt.classList.remove('active');
                });
                this.classList.add('active');
            });
        });
        
        // Submit rejection
        function submitRejection() {
            const reason = document.getElementById('rejection-reason').value;
            const legalRef = document.getElementById('legal-reference').value;
            const tone = document.querySelector('.tone-option.active').dataset.tone;
            
            if (!reason || !legalRef) {
                showNotification('reject-notification', 'Please fill in all required fields', 'error');
                return;
            }
            
            // Show success notification
            showNotification('reject-notification', 
                'Rejection processed successfully. Case marked as resolved.', 
                'success');
            
            // Update status
            document.querySelector('.rejection-status').textContent = 'Rejected';
            document.querySelector('.rejection-status').style.background = '#ffebee';
            document.querySelector('.rejection-status').style.color = '#c62828';
        }
        
        // Generate rejection email
        function generateRejectionEmail() {
            const reason = document.getElementById('rejection-reason').value;
            const legalRef = document.getElementById('legal-reference').value;
            const tone = document.querySelector('.tone-option.active').dataset.tone;
            
            if (!reason || !legalRef) {
                showNotification('reject-notification', 'Please complete rejection details first', 'error');
                return;
            }
            
            // Generate email content based on tone and rejection details
            const emailContent = generateRejectionEmailContent(reason, legalRef, tone);
            
            // Show email in a new window or modal
            const emailWindow = window.open('', '_blank', 'width=600,height=700');
            emailWindow.document.write(`
                <html>
                <head>
                    <title>Rejection Email</title>
                    <style>
                        body { font-family: Arial, sans-serif; padding: 20px; line-height: 1.6; }
                        .header { background: #f8f9fa; padding: 20px; border-bottom: 1px solid #dee2e6; }
                        .subject { font-weight: bold; margin-bottom: 20px; }
                        .body { margin-bottom: 30px; }
                        .legal-section { background: #e3f2fd; padding: 15px; border-left: 4px solid #2196f3; margin: 20px 0; }
                        .footer { font-size: 0.9rem; color: #6c757d; margin-top: 30px; }
                        .button { display: inline-block; background: #d32f2f; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px; margin-top: 20px; }
                    </style>
                </head>
                <body>
                    <div class="header">
                        <h2>Compensation Rejection Notice</h2>
                    </div>
                    <div class="subject">Subject: Rejection of Compensation Claim - Order FF97NN6YOH1H65A</div>
                    <div class="body">
                        ${emailContent}
                    </div>
                    <div class="legal-section">
                        <h3>Legal Reference</h3>
                        <p>This rejection is based on ${legalRef}.</p>
                        <p>Under UAE Consumer Protection Law, suppliers are required to justify compensation decisions with clear evidence.</p>
                    </div>
                    <div class="footer">
                        <p>This is an automated notification. Please do not reply to this email.</p>
                        <p>For further assistance, contact our customer service team.</p>
                    </div>
                    <div style="text-align: center;">
                        <a href="#" class="button" onclick="window.print()">Print Notice</a>
                    </div>
                </body>
                </html>
            `);
        }
        
        // Generate rejection email content
        function generateRejectionEmailContent(reason, legalRef, tone) {
            const templates = {
                Polite: `
                    Dear Valued Customer,
                    
                    We hope this message finds you well. After careful review of your compensation claim for order FF97NN6YOH1H65A, we regret to inform you that your claim has been rejected.
                    
                    **Claim Details:**
                    - Order Number: FF97NN6YOH1H65A
                    - Claim Amount: 14.00 AED
                    - Reason for Claim: Missing item
                    - Decision: Rejected
                    
                    **Reason for Rejection:**
                    ${reason}
                    
                    We understand this may be disappointing news. Our records indicate that the order was delivered in full as confirmed by our delivery team. Unfortunately, we did not receive any supporting evidence from you to substantiate the claim of missing items.
                    
                    If you have additional evidence or wish to appeal this decision, please contact our customer service team within 14 days of receiving this notice.
                    
                    We appreciate your understanding and apologize for any inconvenience caused.
                    
                    Best regards,
                    The Customer Resolution Team
                `,
                Firm: `
                    Dear Customer,
                    
                    This notification formally informs you that your compensation claim for order FF97NN6YOH1H65A has been rejected.
                    
                    **Claim Details:**
                    - Order Number: FF97NN6YOH1H65A
                    - Claim Amount: 14.00 AED
                    - Reason for Claim: Missing item
                    - Decision: Rejected
                    
                    **Reason for Rejection:**
                    ${reason}
                    
                    This decision is based on our review of the delivery records and the absence of supporting evidence from you. Under our terms and conditions, compensation claims must be supported by clear evidence.
                    
                    If you wish to appeal this decision, you must submit a written appeal to our customer service department within 14 days of receiving this notice.
                    
                    This is a final notification regarding this matter.
                    
                    Regards,
                    The Customer Resolution Department
                `,
                Legal: `
                    **LEGAL NOTICE**
                    
                    This document constitutes formal notification regarding the rejection of your compensation claim for order FF97NN6YOH1H65A.
                    
                    **CLAIM DETAILS:**
                    - Order Number: FF97NN6YOH1H65A
                    - Claim Amount: 14.00 AED
                    - Reason for Claim: Missing item
                    - Decision: REJECTED
                    - Date of Decision: ${new Date().toLocaleDateString()}
                    
                    **LEGAL BASIS FOR REJECTION:**
                    ${reason}
                    
                    This rejection is in accordance with ${legalRef}. The claimant has failed to provide sufficient evidence to substantiate the claim of missing items. Delivery records confirm full order fulfillment.
                    
                    **APPEAL PROCEDURE:**
                    You may appeal this decision by submitting a formal written appeal to our legal department within 14 days of receiving this notice. Appeals should include all supporting evidence and reference the specific legal grounds for reconsideration.
                    
                    For legal inquiries, contact: legal@company.com
                    
                    This decision is final and binding unless successfully appealed.
                    
                    Respectfully,
                    The Legal Department
                `
            };
            
            return templates[tone];
        }
        
        // Appeal templates
        const appealTemplates = {
            general: {
                title: "General Appeal – No Evidence Provided",
                subject: "Reversal Requested – Compensation Cancellation (Order [Order Number])",
                body: `Dear Noon Support,

My compensation request for Order [Order Number], cancelled due to "[reason]", lacks any supporting evidence (such as dated photos or documentation). Under Federal Law No. 15 of 2020 on Consumer Protection, suppliers must justify any compensation deductions with clear documentation.

Please reverse this decision unless valid evidence is provided.

Thank you,
[Your Name]`
            },
            evidence: {
                title: "Offering to Provide Evidence",
                subject: "Evidence for Compensation Appeal – Order [Order Number]",
                body: `Hello Noon Support,

My compensation for Order [Order Number] was cancelled without evidence. I can provide photos or other documents to support my claim. Please advise how I can submit these to enable reconsideration.

Thank you,
[Your Name]`
            },
            escalation: {
                title: "Escalation Request",
                subject: "Escalation – Compensation Rejection – Order [Order Number]",
                body: `Dear Noon Support,

My compensation claim for Order [Order Number] was rejected without justification. Please escalate this case to a supervisor or manager for a fair review.

Thank you for your urgency.

Best regards,
[Your Name]`
            },
            policy: {
                title: "Full Policy Reference (Concise)",
                subject: "Compensation Reversal Request – Order [Order Number]",
                body: `Hello Noon Support,

My claim for Order [Order Number] was refused citing "[reason]", but no evidence was provided. Under the updated Consumer Protection Law (incorporating Federal Law No. 15/2020 and its Executive Regulations), any deduction must be verifiably justified.

Please reverse the decision or share documentation immediately.

Regards,
[Your Name]`
            }
        };
        
        // Select appeal template
        function selectAppealTemplate(type) {
            const template = appealTemplates[type];
            const formContainer = document.getElementById('appeal-form-container');
            const formTitle = document.getElementById('appeal-form-title');
            const formContent = document.getElementById('appeal-form-content');
            const preview = document.getElementById('appeal-preview');
            
            // Set form title
            formTitle.textContent = template.title;
            
            // Create form content
            formContent.innerHTML = `
                <div class="form-group">
                    <label>Order Number</label>
                    <input type="text" id="appeal-order-number" placeholder="e.g. FF97NN6YOH1H65A" required>
                </div>
                
                <div class="form-group">
                    <label>Reason for Compensation Cancellation</label>
                    <input type="text" id="appeal-reason" placeholder="e.g. Missing item" required>
                </div>
                
                <div class="form-group">
                    <label>Your Name</label>
                    <input type="text" id="appeal-name" placeholder="Your full name" required>
                </div>
                
                <div class="form-group">
                    <label>Recipient Email</label>
                    <input type="email" id="appeal-recipient" placeholder="support@noon.com" required>
                </div>
            `;
            
            // Show form and update preview
            formContainer.style.display = 'block';
            updateAppealPreview(type);
            
            // Add event listeners to update preview on input change
            ['appeal-order-number', 'appeal-reason', 'appeal-name'].forEach(id => {
                document.getElementById(id).addEventListener('input', () => updateAppealPreview(type));
            });
        }
        
        // Update appeal preview
        function updateAppealPreview(type) {
            const template = appealTemplates[type];
            const orderNumber = document.getElementById('appeal-order-number').value || '[Order Number]';
            const reason = document.getElementById('appeal-reason').value || '[reason]';
            const name = document.getElementById('appeal-name').value || '[Your Name]';
            
            const subject = template.subject.replace(/\[Order Number\]/g, orderNumber);
            const body = template.body
                .replace(/\[Order Number\]/g, orderNumber)
                .replace(/\[reason\]/g, reason)
                .replace(/\[Your Name\]/g, name);
            
            document.getElementById('appeal-preview').textContent = `Subject: ${subject}\n\n${body}`;
        }
        
        // Send appeal email
        function sendAppealEmail() {
            const recipient = document.getElementById('appeal-recipient').value;
            
            if (!recipient) {
                alert('Please enter recipient email address');
                return;
            }
            
            // Show loading state
            const sendBtn = event.target;
            sendBtn.disabled = true;
            sendBtn.innerHTML = '<span class="spinner"></span>Sending...';
            
            // Simulate sending email
            setTimeout(() => {
                // Reset button
                sendBtn.disabled = false;
                sendBtn.innerHTML = 'Send Appeal';
                
                // Show success notification
                showNotification('appeals-notification', 
                    `Appeal email sent successfully to ${recipient}`, 
                    'success');
                
                // Reset form
                cancelAppeal();
            }, 2000);
        }
        
        // Cancel appeal
        function cancelAppeal() {
            document.getElementById('appeal-form-container').style.display = 'none';
            // Reset form fields
            ['appeal-order-number', 'appeal-reason', 'appeal-name', 'appeal-recipient'].forEach(id => {
                document.getElementById(id).value = '';
            });
        }
        
        // Show notification helper
        function showNotification(containerId, message, type) {
            const container = document.getElementById(containerId) || document.body;
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.innerHTML = `
                <div class="notification-icon">${type === 'success' ? '✅' : '❌'}</div>
                <div>${message}</div>
            `;
            
            container.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 5000);
        }
    </script>
</body>
</html>
